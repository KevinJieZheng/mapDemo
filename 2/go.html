<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Page Flow</title>
  <meta name="description" content="A workflow diagram showing navigation between web pages, with an editable list of comments and to-dos." />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Copyright 1998-2020 by Northwoods Software Corporation. -->

  <script src="go.js"></script>
  <script id="code">
    function init() {
	var $ = go.GraphObject.make;
var myDiagram =
  $(go.Diagram, "myDiagramDiv",
    {
      initialContentAlignment: go.Spot.Center, // 居中显示内容
      "undoManager.isEnabled": true // 打开 Ctrl-Z 和 Ctrl-Y 撤销重做功能
    });

// 我们早先定义的节点模板
myDiagram.nodeTemplate =
  $(go.Node, "Horizontal",
    { background: "#44CCFF" },
    $(go.Picture,"Horizontal",
      { margin: 10, width: 50, height: 50, background: "red" },
      new go.Binding("source")),
    $(go.Shape,
      { figure: "LineV", fill: "white"},  
    ),
    $(go.Panel, "Table",
      { margin: 5,
        maxSize: new go.Size(200, NaN),},
      $(go.TextBlock, "Default Text",
        { row: 0, column: 0, columnSpan: 5,
          font: "15pt Segoe UI,sans-serif",
          editable: true, isMultiline: false,
        minSize: new go.Size(10, 16)},
        new go.Binding("text", "name").makeTwoWay()),
      $(go.TextBlock, "Default Text",
        { row: 1, column: 1, columnSpan: 4,
                    editable: true, isMultiline: false,
                    minSize: new go.Size(10, 14),
                    margin: new go.Margin(0, 0, 0, 3)},
        new go.Binding("text", "title").makeTwoWay()),
    )
      // $(go.Panel, "table",
    //   { margin: 12, stroke: "white", font: "bold 16px sans-serif" },
    //   new go.Binding("text", "title"))
  );

  myDiagram.linkTemplate =
        $(go.Link,  // the whole link panel
          { routing: go.Link.Normal },
          $(go.Shape,  // the link shape
            // the first element is assumed to be main element: as if isPanelMain were true
            { stroke: "gray", strokeWidth: 1 }),  
          $(go.Shape,  // the "from" arrowhead
            new go.Binding("fromArrow", "from"),
            { scale: 1, fill: "#D4B52C" }),
          $(go.Shape,  // the "to" arrowhead
            new go.Binding("toArrow", "to"),
            { scale: 1, fill: "#D4B52C" }),
        );



  var levelColors = ["#AC193D", "#2672EC", "#8C0095", "#5133AB",
        "#008299", "#D24726", "#008A00", "#094AB2"];
      myDiagram.layout.commitNodes = function() {
        go.TreeLayout.prototype.commitNodes.call(myDiagram.layout);  
        myDiagram.layout.network.vertexes.each(function(v) {
          if (v.node) {
            var level = v.level % (levelColors.length);
            var color = levelColors[level];
            var shape = v.node.findObject("SHAPE");
            if (shape) shape.fill = $(go.Brush, "Linear", { 0: color, 1: go.Brush.lightenBy(color, 0.05), start: go.Spot.Left, end: go.Spot.Right });
          }
        });
      };


var model = $(go.GraphLinksModel);
model.nodeDataArray =
[ // 必须有"key"和"parent"的字段名,
  // 你还可以添加任何需要的其他字段
  { key: "1", name: "Trigger",   source: "play.png",tltle:'Trigger' },
  { key: "2", name: "Trigger",    source: "play.png" ,tltle:'Trigger'},
  { key: "3", name: "Time(5min)",   source: "play.png" ,tltle:'Trigger'},
  { key: "4", name: "www.ime.com", source: "cloud.png" ,tltle:'HTTP Request'},
  { key: "5", name: "www.pxe.cz",     source: "cloud.png" ,tltle:'HTTP Request'},
  { key: "6", name: "tomcat7037", source: "cloud.png" ,tltle:'HTTP Request'},
  { key: "7", name: "GRAN", source: "cloud.png" ,tltle:'HTTP Request'},
  { key: "8", name: "OD", source: "cloud.png" ,tltle:'HTTP Request'},
  { key: "9", name: "Parse LME", source: "html.png" ,tltle:'code'},
  { key: "10", name: "Parse PXE", source: "html.png" ,tltle:'Debug'},
  { key: "11", name: "Parse ECB Data", source: "html.png" ,tltle:'code'},
  { key: "12", name: "Parse GRAN Data", source: "html.png" ,tltle:'code'},
  { key: "13", name: "Parse OD Data", source: "html.png" ,tltle:'code'},
  { key: "14", name: "Repository", source: "package.png" ,tltle:'code'},
],
model.linkDataArray = [
  {"from":1,"to":4},
  {"from":2,"to":4},
  {"from":3,"to":4},
  {"from":3,"to":4},
]
myDiagram.model = model;
      }
  </script>
</head>
<body onload="init()">
<div id="sample">
  <div id="myDiagramDiv" style='background: #ccc;
     height: 100vh;
     width: 100vw;'></div>
</div>
</body>
</html>